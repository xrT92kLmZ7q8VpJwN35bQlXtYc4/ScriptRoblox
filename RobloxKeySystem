-- NyricXKeySystem.lua
local NyricXKeySystem = {}
local keys = {}
local keyTimes = {}

function NyricXKeySystem:CreateWindow(config)
    local window = {}
    window.Title = config.Title
    window.Size = config.Size
    window.Icon = config.Icon
    window.Theme = config.Theme or "Darker"

    function window:CreateButton(buttonConfig)
        local button = {}
        button.Title = buttonConfig.Title
        button.Callback = buttonConfig.Callback
        return button
    end

    function window:CreateNotification(notificationConfig)
        print(string.format("[Notification] %s: %s", notificationConfig.Title, notificationConfig.Content))
    end

    function window:GetInput(prompt)
        return _G.getenv.key or ""
    end

    function window:SubmitKey(key)
        for keyType, keyList in pairs(keys) do
            for _, validKey in ipairs(keyList) do
                if key == validKey then
                    return true, "Key valid"
                end
            end
        end
        return false, "Invalid key"
    end

    function window:AddKeys(keyType, keyList)
        keys[keyType] = keyList
    end

    function window:Close()
        print("UI Closed")
    end

    NyricXKeySystem.KeyTimes = keyTimes
    return window
end

return NyricXKeySystem
